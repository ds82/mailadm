<h2>Adressen</h2>

<table class="table table-bordered table-hover table-striped">
	<tr>
		<th>#</th>
		<th><i class="glyphicon glyphicon-refresh" /></th>
    <th><i class="glyphicon glyphicon-eye-open" /></th>
    <th>Adresse</th>
    <th>Ziel</th>
	</tr>
	<tr ng-repeat="row in addresses">
		<td>
			<a class="glyph-link" href ng-click="edit(row)"><span class="glyphicon glyphicon-edit"></span></a>
			<a class="glyph-link" href ng-click="delete(row)"><span class="glyphicon glyphicon-remove"></span></a>
		</td>
    <td><a href ng-click="toggleGreylisting( row );"><i class="glyphicon" ng-class="{
      'glyphicon-ok': row.enable_greylisting,
      'glyphicon-remove': !row.enable_greylisting
    }"></i></a></td>
    <td><a href ng-click="togglePolicyd( row )"><i class="glyphicon" ng-class="{
      'glyphicon-ok': row.enable_policyd,
      'glyphicon-remove': !row.enable_policyd
    }"></i></a></td>
		<td>{{row.source}}</td>
		<td>{{row.destination}}</td>
	</tr>
</table>

<p><br /></p>

<h2>Adresse hinzufügen/bearbeiten</h2>

<!-- <pre>{{user | json}}</pre> -->

<!-- ALERTS -->
<div 
	class="alert alert-block alert-success"
	ng-show="meta.addressCreated"
	ng-animate="{ show: 'animated pulse' }"
>
  <button type="button" class="close" ng-click="meta.addressCreated=false">&times;</button>
  <h4>Adresse hinzugefügt!</h4>
  Die Adresse wurde eingetragen und der Mailserver nimmt ab sofort Emails an diese Adresse entgegen.
</div>


<form
	role="form"
	name="addressForm"
	class="form-horizontal"
	ng-submit="submit( address )"
>
	<!-- SOURCE -->
	<div class="form-group">
	  <label class="control-label col-lg-2" for="email">
	  	E-Mail Adresse
	  </label>
	  <div class="col-lg-5 input-group">
	  	<input
	  		type="text"
	  		class="form-control"
	  		placeholder="Alias"
	  		name="alias"
	  		ng-model="address.alias"
	  		ng-pattern="/^([a-z0-9-\.]+|\*)$/"
	  		required
	  	/><span class="input-group-addon">@</span>
	  </div>
	  <div class="col-lg-5">
	  	<select
	  		class="form-control"
	  		ng-model="address.domain"
	  		ng-options="d.domain as d.domain for d in domains"
	  		required
	  	></select>
	  </div>
</div>

<!-- DESTINATION -->
<div class="form-group">
  <label class="control-label col-lg-2" for="">
    Ziel
  </label>
  <div class="col-lg-10">
    <select
    	class="form-control"
      ng-model="address.destination"
      ng-options="u.email as u.email for u in users"
      required
    ></select>
  </div>
</div>

<!-- GREYLISTING -->
<div class="form-group">
    <div class="col-lg-offset-2 col-lg-10">
      <label class="checkbox">
        <input type="checkbox" ng-model="address.enable_greylisting" /> Greylisting aktivieren
      </label>
  </div>
</div>

<!-- POLICYD -->
<div class="form-group">
    <div class="col-lg-offset-2 col-lg-10">
      <label class="checkbox">
        <input type="checkbox" ng-model="address.enable_policyd" />
        Policyd aktivieren
      </label>
  </div>
</div>


<!-- SUBMIT -->
<div class="form-group">
    <div class="col-lg-offset-2 col-lg-10">
    	<button ng-disabled="!addressForm.$dirty || addressForm.$invalid " type="submit" class="btn btn-primary">Hinzufügen</button>
  </div>
</div>

<pre>{{ address | json }}</pre>
<pre>{{ users | json }}</pre>
<pre>{{ domains | json }}</pre>

</form>